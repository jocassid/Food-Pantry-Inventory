{% load static %}{# django's static tag library #}
{% load bootstrap4 %}{# bootstrap4 tag library #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"
          name="viewport"
          content="width-device-width"
          initial-scale="1"
          shrink-to-fit="no"/>

    {# Purpose - Base html for all other templates. #}
    {# URL Name - (N/A) #}
    {# URL Response - (N/A) #}
    {# Table - (N/A) #}
    {# Form - (N/A) #}

    <title>
        {% block title %}
        {% endblock %}
</title>
    {# previously {% bootstrap_css %} was used.  Presumbably this pointed to CDN site.  Is there an option to make the tag point to a local directory #}
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap-grid.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap-reboot.css' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'fpiweb/style.css' %}"/>

</head>

{# Navbar code and menus can be a large chunk of HTML.  I'd suggest moving it to a separate file and then including it. #}
<div id="primary-nav nav-fill w-100">
    <div class="container-fluid"> {# I suggest moving the container fluid up a couple levels in the DOM see my example below #}
        <nav class="navbar navbar-expand-md navbar-dark "
             style="background-color: #811e33; color: #FFFFFF;">

            <a class="navbar-brand nav-fill" href="#"> </a>
            <button class="navbar-toggler display-flex"
                    type="button"
                    data-toggle="collapse"
                    data-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand brand-name">
                {% comment %}
                    I haven't seen an anchor ('a') tags nested inside another I
                    think you mean to have single a tag with class and href
                    attributes
                {% endcomment %}
                <a href="{% url 'fpiweb:index' %}">
                    <div class= "logo-image">
                        <img src="/static/Food_Pantry_Logo.jpg"
                             alt="WARM logo"
                             style="width:20em; height:7em; padding:1em 4em 1em 1em; float:left;"/> {# JC - added backslah to make this a valid empty tag #}
                    </div> {# JC - Added closing div tag #}
                </a>
            </a>

            {% if user.is_authenticated %}
                <div class="collapse navbar-collapse"
                     id="navbarSupportedContent">
                    <ul class="navbar-nav ">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle navbar-text"
                               href="#"
                               id="navbarDropdown"
                               role="button"
                               data-toggle="dropdown"
                               aria-haspopup="true" aria-expanded="false">
                                Box Management
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_checkin_box' %}">Check In a Box</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_checkout_box' %}">Checkout (Consume Product in) a Box</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_box_status' %}">Check Status of a Box</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_add_box' %}">Add a New Box to Inventory</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_move_box' %}">Move a Box</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle navbar-text"
                               href="#"
                               id="navbarDropdown"
                               role="button"
                               data-toggle="dropdown"
                               aria-haspopup="true"
                               aria-expanded="false">
                                Pallet Management
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'fpiweb:build_pallet' %}">Build a Pallet</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:manual_pallet_move' %}">Move a Pallet</a>
                            </div>
                        </li>

                        {% if user_access == access_level.Volunteer %}
                            {# what's with this empty if block? #}
                        {% else %}
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle navbar-text"
                                   href="#"
                                   id="navbarDropdown"
                                   role="button"
                                   data-toggle="dropdown"
                                   aria-haspopup="true"
                                   aria-expanded="false">
                                    System Management
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="{% url 'fpiweb:maintenance' %}">System Maintenance</a>
                                    <a class="dropdown-item" href="{% url 'fpiweb:print_labels' %}">Print Labels</a>
                                    <a class="dropdown-item" href="{% url 'fpiweb:download_activities' %}">Download Activity Log</a>
                                    <a class="dropdown-item" href="/warmadmin/">Admin</a>
                                </div>
                            </li>
                        {% endif %}

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle navbar-text"
                               href="#"
                               id="navbarDropdown"
                               role="button"
                               data-toggle="dropdown"
                               aria-haspopup="true"
                               aria-expanded="false"
                               style = "float:right">
                                {{ user_info.user.first_name }}
                                {{ user_info.user.last_name }}
                                <br/>
                                {{ user_info.profile.title }}
                                ({{ user_info.highest_access_level.name }})
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <a class="dropdown-item" href="{% url 'fpiweb:about' %}">Change password</a>
                                <a class="dropdown-item" href="{% url 'fpiweb:logout' %}">Logout</a>
                            </div>
            {% endif %}

                        </li> {# This should be inside if is_authenticated block #}
                    {# </ul> should be inside if is_authenticated block #}
                {# </div> should be inside if is_authenticated block #}

        </nav>
    </div>
</div>


<body>
    {% comment %}

    <div class="container-fluid">
        {% block navbar %}

            {% include "fpiweb/navbar.html" %}

            {# I'm not sure if included templates are automatically passed the user variable #}
            {# if not use this version of the include tag #}
            {% include "fpiweb/navbar.html" user=user %}

        {% endblock %}
    </div>

    {% endcomment %}
    <div class="container">{# This should probably be container-fluid (fills available width) #}
        {# Display django.contrib.messages as Bootstrap alerts #}

        {% bootstrap_messages %}
        {% block content %}
        {% endblock %}
    </div>

    <script src="{% static '/fpiweb/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static '/fpiweb/popper.min.js' %}"></script>
    <script src="{% static '/bootstrap/js/bootstrap.min.js' %}"></script>
    {% block footer_javascript %}
    {% endblock %}
</body>
</html>

