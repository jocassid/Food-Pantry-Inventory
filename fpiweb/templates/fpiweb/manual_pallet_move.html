{% extends 'fpiweb/base.html' %}
{% load bootstrap4 %}
{% comment %}

CONTEXT VARIABLES
-----------------
mode:                   The mode this template is running in.  Defined in view class
view_class:             The class of the View
from_location_form:     ExistingLocationForm for from Location.  May be None
                        depending on mode
to_location_form:       MoveToLocationForm.  May be None depending on mode
confirm_merge_form:     ConfirmMergeForm.  May be None depending on mode
errors:                 Iterable of non-form errors


{% endcomment %}
{% block title %}
    Move Pallet
{% endblock %}

{% block content %}

    <h1>Move Pallet</h1>

    {% if errors %}
        <div class="alert alert-danger">
            <ul>

            </ul>
        </div>
    {% endif %}

    <form action="" method="post">
        {% csrf_token %}
        <input type="hidden" name="mode" value="{{ mode }}"/>
        {% if mode == view_class.MODE_ENTER_FROM_LOCATION %}
            <h2>Enter location to move pallet from</h2>
            {% bootstrap_form_errors from_location_form %}
            {% bootstrap_field from_location_form.loc_row show_help=False %}
            {% bootstrap_field from_location_form.loc_bin show_help=False %}
            {% bootstrap_field from_location_form.loc_tier show_help=False %}
            <input type="submit" class="btn btn-primary"/>
        {% elif mode == view_class.MODE_ENTER_TO_LOCATION %}
            <h2>Enter location to move pallet to</h2>
            {% bootstrap_form_errors to_location_form %}
            {{ to_location_form.from_location }}
            {% bootstrap_field to_location_form.loc_row show_help=False %}
            {% bootstrap_field to_location_form.loc_bin show_help=False %}
            {% bootstrap_field to_location_form.loc_tier show_help=False %}
            <input type="submit" class="btn btn-primary"/>
        {% elif mode == view_class.MODE_CONFIRM_MERGE %}
            {% bootstrap_form_errors confirm_merge_form %}
            {{ confirm_merge_form.from_location }}
            {{ confirm_merge_form.to_location }}
            <p>There are {{ confirm_merge_form.boxes_at_to_location_int }}
                boxes at {{ confirm_merge_form.to_location_str }}.</p>
            {% bootstrap_field confirm_merge_form.action %}
            <input type="submit" class="btn btn-primary"/>
        {% else %}
            <div class="alert alert-danger">Unrecognized mode '{{ mode }}' in
            manual_pallet_move.html</div>
        {% endif %}
    </form>



{% endblock %}